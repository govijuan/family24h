function displayModal(e){"use strict";button.hasClass("btn-danger")&&(button.removeClass("btn-danger"),button.addClass("btn-success")),"lock"===e&&(title[0].innerHTML="Lock your phone",avatar[0].src="/images/ic_phonelink_lock_black_48px.svg",description[0].innerHTML="You can lock your phone and combine with others actions",button[0].innerHTML="Lock",button[0].setAttribute("onclick","confirmModal('lock');")),"ring"===e&&(title[0].innerHTML="Ring your phone",avatar[0].src="/images/ic_speaker_phone_black_48px.svg",description[0].innerHTML="You can lock your phone and combine with others actions",button[0].innerHTML="Ring",button[0].setAttribute("onclick","notification('ring');")),"pattern"===e&&(title[0].innerHTML="Change the lock pattern of your phone",avatar[0].src="/images/ic_dialpad_black_48px.svg",description[0].innerHTML="You can lock your phone and combine with others actions",button[0].innerHTML="Change"),"wipe"===e&&(title[0].innerHTML="Wipe your phone",avatar[0].src="/images/ic_phonelink_erase_black_48px.svg",description[0].innerHTML="You can lock your phone and combine with others actions",button[0].innerHTML="Wipe",button[0].setAttribute("onclick","confirmModal('wipe');"),button.removeClass("btn-success"),button.addClass("btn-danger")),modal.fadeIn("slow")}function confirmModal(e){"use strict";title[0].innerHTML="Confirm your password",avatar[0].parentNode.parentNode.remove(this),description[0].innerHTML="<input type='password' name='confirm[password]' id='confirm[password]'/>","lock"===e&&(button[0].innerHTML="Lock",button[0].setAttribute("onclick","notification('lock');")),"pattern"===e&&(button[0].innerHTML="Change"),"wipe"===e&&(button[0].innerHTML="Wipe",button[0].setAttribute("onclick","notification('wipe');"),button.removeClass("btn-success"),button.addClass("btn-danger")),modal.fadeIn("slow")}function notification(e){"use strict";var n="/notification-messages",o=(document.getElementsByName("confirm[password]"),"&code="),t="&event_id=",i="&data={}",a=guid();"lock"==e&&(o+="device:locked",flash.innerHTML+="<p>Device locked.</p>"),"unlock"==e&&(o+="device:unlocked",flash.innerHTML+="<p>Device unlocked.</p>"),"ring"==e&&(o+="buzzer/turn-on",flash.innerHTML+="<p>Device ringing.</p>"),"wipe"==e&&(o+="device:wipe",flash.innerHTML+="<p>Device's data wiped.</p>"),t+=a;var r=o+i+t;"ring"!==e&&(r+=password),$.ajax({url:api_url+n,type:"POST",data:r+"&api_key="+api_key,crossDomain:!0,statusCode:{202:function(e){console.log(e)},400:function(e){console.log(e)},404:function(e){console.log(e)}}}),$(".confirm-modal").fadeOut("slow"),flash.className+=" alert-success",fadeIn(flash)}function guid(){"use strict";function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function geo_location(){"use strict";if(navigator.geolocation){var e={enableHighAccuracy:!0,timeout:1/0,maximumAge:0};watchId=navigator.geolocation.getCurrentPosition(showPosition,showError,e)}else flash.innerHTML+="<p>Geolocation is <strong>not</strong> supported in your browser.</p>",fadeIn(flash)}function showPosition(e){"use strict";var n=e.coords.latitude,o=e.coords.longitude,t=new google.maps.LatLng(n,o),i={zoom:15,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP},a=document.getElementById("mapdiv"),r=new google.maps.Map(a,i),s={map:r,position:t,title:"Hi , I am here",animation:google.maps.Animation.DROP},c=new google.maps.Marker(s),l=new google.maps.Geocoder;l.geocode({latLng:t},function(e,n){if(n==google.maps.GeocoderStatus.OK)if(e[1]){var o={content:e[1].formatted_address,position:t},i=new google.maps.InfoWindow(o);google.maps.event.addListener(c,"click",function(){i.open(r)})}else flash.innerHTML+="<p>No results found.</p>";else flash.inerHTLM+="<p>Geocoder failed due to: "+n+"</p>"}),fadeIn(a)}function stopWatch(){"use strict";watchId&&(navigator.geolocation.clearWatch(watchId),watchId=null)}function showError(e){"use strict";switch(e.code){case 1==e.code||e.PERMISSION_DENIED:flash.innerHTML+="<p>User denied the request for Geolocation.</p>",fadeIn(flash);break;case 2==e.code||e.POSITION_UNAVAILABLE:flash.innerHTML+="<p>Location information is unavailable.</p>",fadeIn(flash);break;case 3==e.code||e.TIMEOUT:flash.innerHTML+="<p>The request to get user location timed out.</p>",fadeIn(flash);break;case 0===e.code||e.UNKNOWN_ERROR:flash.innerHTML+="<p>An unknown error occurred.</p>",fadeIn(flash)}}function resizeSidebar(){"use strict";var e=window.innerHeight,n=(window.innerWidth,document.getElementsByClassName("button__bar")),o=document.getElementsByClassName("top"),t=document.getElementsByClassName("content"),i=document.getElementById("mapdiv");n[0].style.height=e-o[0].offsetHeight+"px",t[0].style.height=e-o[0].offsetHeight+"px",i.style.height=e-o[0].offsetHeight+"px"}function validateCookie(){"use strict";var e="/users";$.ajax({url:api_url+e+"/"+user_id,type:"GET",crossDomain:!0,data:"&api_key="+api_key})}function getCookie(e){var n=document.cookie,o=e+"=";return n.length>0&&(begin=n.indexOf(o),-1!=begin)?(begin+=o.length,end=n.indexOf(";",begin),-1==end&&(end=n.length),unescape(n.substring(begin,end))):null}var api_url="http://familyhomol.eokoe.com",flash=document.getElementById("flash"),user_id=getCookie("family_id"),api_key=getCookie("family_key");$(document).ready(function(){var e="/users";$.ajax({url:api_url+e+"/"+user_id+"?&api_key="+api_key,type:"GET",crossDomain:!0,statusCode:{200:function(e){console.log(e);for(var n=document.querySelectorAll(".telephone"),o=document.querySelectorAll(".name"),t=document.querySelectorAll(".email"),i=document.querySelectorAll(".profile_picture_url"),a=0;a<=n.length-1;a++)n[a].innerHTML=e.telephone,o[a].innerHTML=e.name,t[a].innerHTML=e.email,i[a].innerHTML=e.profile_picture_url},400:function(e){console.log(e)},404:function(e){console.log(e)}}})});var modal=$(".confirm-modal"),title=$(".confirm-modal h3"),avatar=$(".confirm-modal img"),description=$(".confirm-modal p"),button=$(".confirm-modal .btn"),watchId=null;$(".user-config").click(function(){$(".config-box").toggle()}),$(".confirm-modal .close").click(function(){$(this).parent().fadeOut("slow")}),function(){document.cookie.contains("family_id")&&document.cookie.contains("family_key")?validateCookie():window.location="/login"}();