function displayModal(e){"use strict";button.hasClass("btn-danger")&&(button.removeClass("btn-danger"),button.addClass("btn-success")),"lock"===e&&(title[0].innerHTML="Lock your phone",avatar[0].src="/images/ic_phonelink_lock_black_48px.svg",description[0].innerHTML="You can lock your phone and combine with others actions",button[0].innerHTML="Lock",button[0].setAttribute("onclick","confirmModal('lock');")),"ring"===e&&(title[0].innerHTML="Ring your phone",avatar[0].src="/images/ic_speaker_phone_black_48px.svg",description[0].innerHTML="You can lock your phone and combine with others actions",button[0].innerHTML="Ring",button[0].setAttribute("onclick","notification('ring');")),"pattern"===e&&(title[0].innerHTML="Change the lock pattern of your phone",avatar[0].src="/images/ic_dialpad_black_48px.svg",description[0].innerHTML="You can lock your phone and combine with others actions",button[0].innerHTML="Change"),"wipe"===e&&(title[0].innerHTML="Wipe your phone",avatar[0].src="/images/ic_phonelink_erase_black_48px.svg",description[0].innerHTML="You can lock your phone and combine with others actions",button[0].innerHTML="Wipe",button[0].setAttribute("onclick","confirmModal('wipe');"),button.removeClass("btn-success"),button.addClass("btn-danger")),modal.fadeIn("slow")}function confirmModal(e){"use strict";title[0].innerHTML="Confirm your password",avatar[0].parentNode.parentNode.remove(this),description[0].innerHTML="<input type='password' name='confirm[password]' id='confirm[password]'/>","lock"===e&&(button[0].innerHTML="Lock",button[0].setAttribute("onclick","notification('lock');")),"pattern"===e&&(button[0].innerHTML="Change"),"wipe"===e&&(button[0].innerHTML="Wipe",button[0].setAttribute("onclick","notification('wipe');"),button.removeClass("btn-success"),button.addClass("btn-danger")),modal.fadeIn("slow")}function notification(e){"use strict";var o="/notification-messages",n=(document.getElementsByName("confirm[password]"),"&code="),t="&event_id=",i="&data={}",a=guid();"lock"==e&&(n+="device:locked",flash.innerHTML+="<p>Device locked.</p>"),"unlock"==e&&(n+="device:unlocked",flash.innerHTML+="<p>Device unlocked.</p>"),"ring"==e&&(n+="buzzer/turn-on",flash.innerHTML+="<p>Device ringing.</p>"),"wipe"==e&&(n+="device:wipe",flash.innerHTML+="<p>Device's data wiped.</p>"),t+=a;var s=n+i+t;"ring"!==e&&(s+=password),$.ajax({url:api_url+o,type:"POST",data:s+"&api_key="+api_key,crossDomain:!0,statusCode:{202:function(e){console.log(e)},400:function(e){console.log(e)},404:function(e){console.log(e)}}}),$(".confirm-modal").fadeOut("slow"),flash.className+=" alert-success",flash.fadeIn("slow")}function guid(){"use strict";function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function geo_location(){"use strict";if(navigator.geolocation){var e={enableHighAccuracy:!0,timeout:1/0,maximumAge:0};watchId=navigator.geolocation.getCurrentPosition(showPosition,showError,e)}else flash.innerHTML+="<p>Geolocation is <strong>not</strong> supported in your browser.</p>",flash.fadeIn("slow")}function showPosition(e){"use strict";var o=e.coords.latitude,n=e.coords.longitude,t=new google.maps.LatLng(o,n),i={zoom:15,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP},a=document.getElementById("mapdiv"),s=new google.maps.Map(a,i),r={map:s,position:t,title:"Hi , I am here",animation:google.maps.Animation.DROP},c=new google.maps.Marker(r),l=new google.maps.Geocoder;l.geocode({latLng:t},function(e,o){if(o==google.maps.GeocoderStatus.OK)if(e[1]){var n={content:e[1].formatted_address,position:t},i=new google.maps.InfoWindow(n);google.maps.event.addListener(c,"click",function(){i.open(s)})}else flash.innerHTML+="<p>No results found.</p>";else flash.innerHTML+="<p>Geocoder failed due to: "+o+"</p>"}),fadeIn(a)}function stopWatch(){"use strict";watchId&&(navigator.geolocation.clearWatch(watchId),watchId=null)}function showError(e){"use strict";switch(e.code){case 1==e.code||e.PERMISSION_DENIED:flash.innerHTML+="<p>User denied the request for Geolocation.</p>",flash.fadeIn("slow");break;case 2==e.code||e.POSITION_UNAVAILABLE:flash.innerHTML+="<p>Location information is unavailable.</p>",flash.fadeIn("slow");break;case 3==e.code||e.TIMEOUT:flash.innerHTML+="<p>The request to get user location timed out.</p>",flash.fadeIn("slow");break;case 0===e.code||e.UNKNOWN_ERROR:flash.innerHTML+="<p>An unknown error occurred.</p>",flash.fadeIn("slow")}}function resizeSidebar(){"use strict";var e=window.innerHeight,o=(window.innerWidth,document.getElementsByClassName("button__bar")),n=document.getElementsByClassName("top"),t=document.getElementsByClassName("content"),i=document.getElementById("mapdiv");o[0].style.height=e-n[0].offsetHeight+"px",t[0].style.height=e-n[0].offsetHeight+"px",i.style.height=e-n[0].offsetHeight+"px"}function validateCookie(){"use strict";var e="/users";$.ajax({url:api_url+e+"/"+user_id,type:"GET",crossDomain:!0,data:"&api_key="+api_key,statusCode:{200:function(e){},403:function(e){window.location="/login"}}})}function getCookie(e){var o=document.cookie,n=e+"=";return o.length>0&&(begin=o.indexOf(n),-1!=begin)?(begin+=n.length,end=o.indexOf(";",begin),-1==end&&(end=o.length),unescape(o.substring(begin,end))):null}var api_url="http://familyhomol.eokoe.com",flash=$("#flash"),user_id=getCookie("family_id"),api_key=getCookie("family_key");$(document).ready(function(){var e="/users";$.ajax({url:api_url+e+"/"+user_id+"?&api_key="+api_key,type:"GET",crossDomain:!0,statusCode:{200:function(e){console.log(e);for(var o=document.querySelectorAll(".telephone"),n=document.querySelectorAll(".name"),t=document.querySelectorAll(".email"),i=document.querySelectorAll(".profile_picture_url"),a=0;a<=o.length-1;a++)o[a].innerHTML=e.telephone,n[a].innerHTML=e.name,t[a].innerHTML=e.email,i[a].innerHTML=e.profile_picture_url},400:function(e){console.log(e)},404:function(e){console.log(e)}}})});var modal=$(".confirm-modal"),title=$(".confirm-modal h3"),avatar=$(".confirm-modal img"),description=$(".confirm-modal p"),button=$(".confirm-modal .btn"),watchId=null;$(".user-config").click(function(){$(".config-box").toggle()}),$(".confirm-modal .close").click(function(){$(this).parent().fadeOut("slow")}),$("#flash .close").click(function(){$(this).parent().fadeOut("slow")}),function(){document.cookie.contains("family_id")&&document.cookie.contains("family_key")?validateCookie():window.location="/login"}();